--
-- PostgreSQL database dump
--

\restrict tYDBqcUPfhldAq0WTuzERFg98QbhhNn8zEywoglgi8U46Qlx1GWqtH1KJunB2F0

-- Dumped from database version 17.6
-- Dumped by pg_dump version 17.6

-- Started on 2025-09-30 21:57:03

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 230 (class 1259 OID 16630)
-- Name: favorite_list_movies; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.favorite_list_movies (
    list_movie_id integer NOT NULL,
    list_id integer NOT NULL,
    movie_id integer NOT NULL,
    sort_order integer DEFAULT 0 NOT NULL,
    added_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.favorite_list_movies OWNER TO postgres;

--
-- TOC entry 5012 (class 0 OID 0)
-- Dependencies: 230
-- Name: COLUMN favorite_list_movies.sort_order; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.favorite_list_movies.sort_order IS 'Järjestys listassa';


--
-- TOC entry 229 (class 1259 OID 16629)
-- Name: favorite_list_movies_list_movie_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.favorite_list_movies ALTER COLUMN list_movie_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.favorite_list_movies_list_movie_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 228 (class 1259 OID 16617)
-- Name: favorite_lists; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.favorite_lists (
    list_id integer NOT NULL,
    user_id integer NOT NULL,
    list_name character varying(255) NOT NULL,
    share_url character varying(255),
    is_default boolean DEFAULT false NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.favorite_lists OWNER TO postgres;

--
-- TOC entry 5013 (class 0 OID 0)
-- Dependencies: 228
-- Name: COLUMN favorite_lists.list_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.favorite_lists.list_name IS 'Suosikkilistan nimi, esim "Omat suosikit"';


--
-- TOC entry 5014 (class 0 OID 0)
-- Dependencies: 228
-- Name: COLUMN favorite_lists.share_url; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.favorite_lists.share_url IS 'Jaettava URI, null jos ei jaettu';


--
-- TOC entry 5015 (class 0 OID 0)
-- Dependencies: 228
-- Name: COLUMN favorite_lists.is_default; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.favorite_lists.is_default IS 'Onko käyttäjän oletuslista';


--
-- TOC entry 227 (class 1259 OID 16616)
-- Name: favorite_lists_list_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.favorite_lists ALTER COLUMN list_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.favorite_lists_list_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 16588)
-- Name: group_members; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.group_members (
    member_id integer NOT NULL,
    group_id integer NOT NULL,
    user_id integer NOT NULL,
    status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    joined_at timestamp without time zone,
    requested_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.group_members OWNER TO postgres;

--
-- TOC entry 5016 (class 0 OID 0)
-- Dependencies: 222
-- Name: COLUMN group_members.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.group_members.status IS 'pending, approved, rejected';


--
-- TOC entry 221 (class 1259 OID 16587)
-- Name: group_members_member_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.group_members ALTER COLUMN member_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.group_members_member_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 232 (class 1259 OID 16638)
-- Name: group_movies; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.group_movies (
    group_movie_id integer NOT NULL,
    group_id integer NOT NULL,
    movie_id integer NOT NULL,
    added_by_user_id integer NOT NULL,
    added_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.group_movies OWNER TO postgres;

--
-- TOC entry 5017 (class 0 OID 0)
-- Dependencies: 232
-- Name: COLUMN group_movies.added_by_user_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.group_movies.added_by_user_id IS 'Kuka lisäsi';


--
-- TOC entry 231 (class 1259 OID 16637)
-- Name: group_movies_group_movie_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.group_movies ALTER COLUMN group_movie_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.group_movies_group_movie_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 234 (class 1259 OID 16645)
-- Name: group_showtimes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.group_showtimes (
    group_showtime_id integer NOT NULL,
    group_id integer NOT NULL,
    movie_id integer,
    theater_name character varying(255) NOT NULL,
    movie_title character varying(255) NOT NULL,
    showtime timestamp without time zone NOT NULL,
    finnkino_id character varying(50),
    added_by_user_id integer NOT NULL,
    added_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.group_showtimes OWNER TO postgres;

--
-- TOC entry 5018 (class 0 OID 0)
-- Dependencies: 234
-- Name: COLUMN group_showtimes.movie_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.group_showtimes.movie_id IS 'Yhdistys sovelluksen elokuvaan';


--
-- TOC entry 5019 (class 0 OID 0)
-- Dependencies: 234
-- Name: COLUMN group_showtimes.theater_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.group_showtimes.theater_name IS 'Teatteri';


--
-- TOC entry 5020 (class 0 OID 0)
-- Dependencies: 234
-- Name: COLUMN group_showtimes.movie_title; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.group_showtimes.movie_title IS 'Elokuvan nimi Finnkino API:sta';


--
-- TOC entry 5021 (class 0 OID 0)
-- Dependencies: 234
-- Name: COLUMN group_showtimes.showtime; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.group_showtimes.showtime IS 'Esitysaika';


--
-- TOC entry 5022 (class 0 OID 0)
-- Dependencies: 234
-- Name: COLUMN group_showtimes.finnkino_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.group_showtimes.finnkino_id IS 'Finnkino API ID';


--
-- TOC entry 233 (class 1259 OID 16644)
-- Name: group_showtimes_group_showtime_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.group_showtimes ALTER COLUMN group_showtime_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.group_showtimes_group_showtime_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 16580)
-- Name: groups; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.groups (
    group_id integer NOT NULL,
    group_name character varying(255) NOT NULL,
    owner_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.groups OWNER TO postgres;

--
-- TOC entry 5023 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN groups.group_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.groups.group_name IS 'Ryhmän nimi';


--
-- TOC entry 5024 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN groups.owner_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.groups.owner_id IS 'Ryhmän luoja/omistaja';


--
-- TOC entry 219 (class 1259 OID 16579)
-- Name: groups_group_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.groups ALTER COLUMN group_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.groups_group_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 224 (class 1259 OID 16596)
-- Name: movies; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.movies (
    movie_id integer NOT NULL,
    tmdb_id character varying(50) NOT NULL,
    title character varying(255) NOT NULL,
    description text,
    poster_url character varying(500),
    release_year integer,
    genre character varying(255),
    tmdb_rating double precision,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.movies OWNER TO postgres;

--
-- TOC entry 5025 (class 0 OID 0)
-- Dependencies: 224
-- Name: COLUMN movies.tmdb_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.movies.tmdb_id IS 'The Movie Database ID';


--
-- TOC entry 223 (class 1259 OID 16595)
-- Name: movies_movie_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.movies ALTER COLUMN movie_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.movies_movie_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 16607)
-- Name: reviews; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.reviews (
    review_id integer NOT NULL,
    user_id integer NOT NULL,
    movie_id integer NOT NULL,
    review_text text NOT NULL,
    rating integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.reviews OWNER TO postgres;

--
-- TOC entry 5026 (class 0 OID 0)
-- Dependencies: 226
-- Name: COLUMN reviews.rating; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.reviews.rating IS '1-5 tähteä';


--
-- TOC entry 225 (class 1259 OID 16606)
-- Name: reviews_review_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.reviews ALTER COLUMN review_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.reviews_review_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 218 (class 1259 OID 16568)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    user_id integer NOT NULL,
    email character varying(255) NOT NULL,
    password_hash character varying(255) NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    theme character varying(50) DEFAULT 'default'::character varying
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 5027 (class 0 OID 0)
-- Dependencies: 218
-- Name: COLUMN users.email; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.users.email IS 'Käyttäjätunnus';


--
-- TOC entry 5028 (class 0 OID 0)
-- Dependencies: 218
-- Name: COLUMN users.password_hash; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.users.password_hash IS 'Min 8 merkkiä, iso kirjain, numero';


--
-- TOC entry 217 (class 1259 OID 16567)
-- Name: users_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN user_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 5002 (class 0 OID 16630)
-- Dependencies: 230
-- Data for Name: favorite_list_movies; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.favorite_list_movies (list_movie_id, list_id, movie_id, sort_order, added_at) FROM stdin;
\.


--
-- TOC entry 5000 (class 0 OID 16617)
-- Dependencies: 228
-- Data for Name: favorite_lists; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.favorite_lists (list_id, user_id, list_name, share_url, is_default, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 4994 (class 0 OID 16588)
-- Dependencies: 222
-- Data for Name: group_members; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.group_members (member_id, group_id, user_id, status, joined_at, requested_at) FROM stdin;
3	3	3	approved	\N	2025-09-15 14:43:58.102584
9	3	4	approved	\N	2025-09-16 18:07:38.617108
10	4	4	approved	\N	2025-09-16 18:08:59.644583
12	4	5	approved	2025-09-16 18:10:12.646957	2025-09-16 18:09:52.03327
13	3	5	approved	2025-09-30 17:51:31.04018	2025-09-16 18:09:52.89524
\.


--
-- TOC entry 5004 (class 0 OID 16638)
-- Dependencies: 232
-- Data for Name: group_movies; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.group_movies (group_movie_id, group_id, movie_id, added_by_user_id, added_at) FROM stdin;
\.


--
-- TOC entry 5006 (class 0 OID 16645)
-- Dependencies: 234
-- Data for Name: group_showtimes; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.group_showtimes (group_showtime_id, group_id, movie_id, theater_name, movie_title, showtime, finnkino_id, added_by_user_id, added_at) FROM stdin;
\.


--
-- TOC entry 4992 (class 0 OID 16580)
-- Dependencies: 220
-- Data for Name: groups; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.groups (group_id, group_name, owner_id, created_at, updated_at) FROM stdin;
3	Testi	3	2025-09-15 14:43:58.101766	2025-09-15 14:43:58.101766
4	Testi2	4	2025-09-16 18:08:59.643342	2025-09-16 18:08:59.643342
\.


--
-- TOC entry 4996 (class 0 OID 16596)
-- Dependencies: 224
-- Data for Name: movies; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.movies (movie_id, tmdb_id, title, description, poster_url, release_year, genre, tmdb_rating, created_at) FROM stdin;
\.


--
-- TOC entry 4998 (class 0 OID 16607)
-- Dependencies: 226
-- Data for Name: reviews; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.reviews (review_id, user_id, movie_id, review_text, rating, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 4990 (class 0 OID 16568)
-- Dependencies: 218
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (user_id, email, password_hash, created_at, updated_at, theme) FROM stdin;
5	testi2@testi.com	$2b$10$qE9y0wkG9JI06BygRMOu4.LLlnZbMZS1lMNIhIgPvMZx0a6Awc5ny	2025-09-15 15:48:11.344591	2025-09-30 18:30:28.169747	default
4	testi@testi.com	$2b$10$UTmNWEg.OUPXzrvOZ9O2.evtUDvMGImOF9eTUOvKWwX40dXC4zxNi	2025-09-15 13:30:40.538783	2025-09-30 18:30:44.119935	hacker
3	aleksi.huotari@hotmail.com	$2b$10$DFKSNK9BbUGxvMpZWBssJO/R1Em3dn.vd4zQHeGsD97MjMYLvxBA2	2025-09-09 13:43:54.130654	2025-09-30 18:30:48.859958	liquidEther
\.


--
-- TOC entry 5029 (class 0 OID 0)
-- Dependencies: 229
-- Name: favorite_list_movies_list_movie_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.favorite_list_movies_list_movie_id_seq', 1, false);


--
-- TOC entry 5030 (class 0 OID 0)
-- Dependencies: 227
-- Name: favorite_lists_list_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.favorite_lists_list_id_seq', 1, false);


--
-- TOC entry 5031 (class 0 OID 0)
-- Dependencies: 221
-- Name: group_members_member_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.group_members_member_id_seq', 13, true);


--
-- TOC entry 5032 (class 0 OID 0)
-- Dependencies: 231
-- Name: group_movies_group_movie_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.group_movies_group_movie_id_seq', 1, false);


--
-- TOC entry 5033 (class 0 OID 0)
-- Dependencies: 233
-- Name: group_showtimes_group_showtime_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.group_showtimes_group_showtime_id_seq', 1, false);


--
-- TOC entry 5034 (class 0 OID 0)
-- Dependencies: 219
-- Name: groups_group_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.groups_group_id_seq', 4, true);


--
-- TOC entry 5035 (class 0 OID 0)
-- Dependencies: 223
-- Name: movies_movie_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.movies_movie_id_seq', 1, false);


--
-- TOC entry 5036 (class 0 OID 0)
-- Dependencies: 225
-- Name: reviews_review_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.reviews_review_id_seq', 1, false);


--
-- TOC entry 5037 (class 0 OID 0)
-- Dependencies: 217
-- Name: users_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_user_id_seq', 5, true);


--
-- TOC entry 4824 (class 2606 OID 16636)
-- Name: favorite_list_movies favorite_list_movies_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favorite_list_movies
    ADD CONSTRAINT favorite_list_movies_pkey PRIMARY KEY (list_movie_id);


--
-- TOC entry 4818 (class 2606 OID 16626)
-- Name: favorite_lists favorite_lists_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favorite_lists
    ADD CONSTRAINT favorite_lists_pkey PRIMARY KEY (list_id);


--
-- TOC entry 4820 (class 2606 OID 16628)
-- Name: favorite_lists favorite_lists_share_url_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favorite_lists
    ADD CONSTRAINT favorite_lists_share_url_key UNIQUE (share_url);


--
-- TOC entry 4807 (class 2606 OID 16594)
-- Name: group_members group_members_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_members
    ADD CONSTRAINT group_members_pkey PRIMARY KEY (member_id);


--
-- TOC entry 4827 (class 2606 OID 16643)
-- Name: group_movies group_movies_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_movies
    ADD CONSTRAINT group_movies_pkey PRIMARY KEY (group_movie_id);


--
-- TOC entry 4829 (class 2606 OID 16652)
-- Name: group_showtimes group_showtimes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_showtimes
    ADD CONSTRAINT group_showtimes_pkey PRIMARY KEY (group_showtime_id);


--
-- TOC entry 4804 (class 2606 OID 16586)
-- Name: groups groups_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.groups
    ADD CONSTRAINT groups_pkey PRIMARY KEY (group_id);


--
-- TOC entry 4811 (class 2606 OID 16603)
-- Name: movies movies_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movies
    ADD CONSTRAINT movies_pkey PRIMARY KEY (movie_id);


--
-- TOC entry 4813 (class 2606 OID 16605)
-- Name: movies movies_tmdb_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movies
    ADD CONSTRAINT movies_tmdb_id_key UNIQUE (tmdb_id);


--
-- TOC entry 4815 (class 2606 OID 16615)
-- Name: reviews reviews_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reviews
    ADD CONSTRAINT reviews_pkey PRIMARY KEY (review_id);


--
-- TOC entry 4809 (class 2606 OID 16735)
-- Name: group_members uq_group_members_group_user; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_members
    ADD CONSTRAINT uq_group_members_group_user UNIQUE (group_id, user_id);


--
-- TOC entry 4800 (class 2606 OID 16578)
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- TOC entry 4802 (class 2606 OID 16576)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (user_id);


--
-- TOC entry 4822 (class 1259 OID 16656)
-- Name: favorite_list_movies_list_id_movie_id_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX favorite_list_movies_list_id_movie_id_idx ON public.favorite_list_movies USING btree (list_id, movie_id);


--
-- TOC entry 4821 (class 1259 OID 16655)
-- Name: favorite_lists_user_id_is_default_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX favorite_lists_user_id_is_default_idx ON public.favorite_lists USING btree (user_id, is_default);


--
-- TOC entry 4805 (class 1259 OID 16653)
-- Name: group_members_group_id_user_id_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX group_members_group_id_user_id_idx ON public.group_members USING btree (group_id, user_id);


--
-- TOC entry 4825 (class 1259 OID 16657)
-- Name: group_movies_group_id_movie_id_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX group_movies_group_id_movie_id_idx ON public.group_movies USING btree (group_id, movie_id);


--
-- TOC entry 4816 (class 1259 OID 16654)
-- Name: reviews_user_id_movie_id_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX reviews_user_id_movie_id_idx ON public.reviews USING btree (user_id, movie_id);


--
-- TOC entry 4836 (class 2606 OID 16688)
-- Name: favorite_list_movies favorite_list_movies_list_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favorite_list_movies
    ADD CONSTRAINT favorite_list_movies_list_id_fkey FOREIGN KEY (list_id) REFERENCES public.favorite_lists(list_id);


--
-- TOC entry 4837 (class 2606 OID 16693)
-- Name: favorite_list_movies favorite_list_movies_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favorite_list_movies
    ADD CONSTRAINT favorite_list_movies_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movies(movie_id);


--
-- TOC entry 4835 (class 2606 OID 16683)
-- Name: favorite_lists favorite_lists_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.favorite_lists
    ADD CONSTRAINT favorite_lists_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(user_id);


--
-- TOC entry 4831 (class 2606 OID 16729)
-- Name: group_members group_members_group_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_members
    ADD CONSTRAINT group_members_group_id_fkey FOREIGN KEY (group_id) REFERENCES public.groups(group_id) ON DELETE CASCADE;


--
-- TOC entry 4832 (class 2606 OID 16668)
-- Name: group_members group_members_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_members
    ADD CONSTRAINT group_members_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(user_id);


--
-- TOC entry 4838 (class 2606 OID 16708)
-- Name: group_movies group_movies_added_by_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_movies
    ADD CONSTRAINT group_movies_added_by_user_id_fkey FOREIGN KEY (added_by_user_id) REFERENCES public.users(user_id);


--
-- TOC entry 4839 (class 2606 OID 16698)
-- Name: group_movies group_movies_group_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_movies
    ADD CONSTRAINT group_movies_group_id_fkey FOREIGN KEY (group_id) REFERENCES public.groups(group_id);


--
-- TOC entry 4840 (class 2606 OID 16703)
-- Name: group_movies group_movies_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_movies
    ADD CONSTRAINT group_movies_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movies(movie_id);


--
-- TOC entry 4841 (class 2606 OID 16723)
-- Name: group_showtimes group_showtimes_added_by_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_showtimes
    ADD CONSTRAINT group_showtimes_added_by_user_id_fkey FOREIGN KEY (added_by_user_id) REFERENCES public.users(user_id);


--
-- TOC entry 4842 (class 2606 OID 16713)
-- Name: group_showtimes group_showtimes_group_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_showtimes
    ADD CONSTRAINT group_showtimes_group_id_fkey FOREIGN KEY (group_id) REFERENCES public.groups(group_id);


--
-- TOC entry 4843 (class 2606 OID 16718)
-- Name: group_showtimes group_showtimes_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.group_showtimes
    ADD CONSTRAINT group_showtimes_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movies(movie_id);


--
-- TOC entry 4830 (class 2606 OID 16658)
-- Name: groups groups_owner_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.groups
    ADD CONSTRAINT groups_owner_id_fkey FOREIGN KEY (owner_id) REFERENCES public.users(user_id);


--
-- TOC entry 4833 (class 2606 OID 16678)
-- Name: reviews reviews_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reviews
    ADD CONSTRAINT reviews_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movies(movie_id);


--
-- TOC entry 4834 (class 2606 OID 16673)
-- Name: reviews reviews_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reviews
    ADD CONSTRAINT reviews_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(user_id);


-- Completed on 2025-09-30 21:57:03

--
-- PostgreSQL database dump complete
--

\unrestrict tYDBqcUPfhldAq0WTuzERFg98QbhhNn8zEywoglgi8U46Qlx1GWqtH1KJunB2F0

